---
title: "lef_project"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(here)
library(janitor)
library(lubridate)
library(patchwork)
```

Code below reads in and assigns multiple CSV files
```{r}
# create a list of file names to read in

lef_files <- list.files(here("data"), pattern = "*.csv")

# loop over the files, reading in, and creating a stored object with assign
for (i in seq_along(lef_files)) {
    assign(lef_files[i] %>%
             str_remove(".csv"),
           read_csv(here("data", lef_files[i]), na = c("-9999","-9999.0","-9999.00")))
  
}


```


Julia code chunk - cleaning QB1
```{r}
qb1 <- `QuebradaCuenca1-Bisley` %>% 
  clean_names() %>% 
  mutate(sample_date = lubridate::mdy(sample_date)) %>% 
  mutate(year = year(sample_date)) %>% 
  mutate(month = month(sample_date))

qb1_df <- ggplot(data = qb1, aes(x = sample_date, y = no3)) +
  geom_line()
  
qb1_df

```



Scout code chunk: Cleaning BQ2
```{r}
#created a new df called "qb2"
#separated the sample date column into sample dates and sample times for ease of wrangling the dates, which are of more importance 
#used lubridate to change `sample_date` data to mdy format
#added a year column using sample_date
#added a month column using sample_date

qb2 <- `QuebradaCuenca2-Bisley` %>% 
  clean_names() %>% 
  separate(col = sample_date, into = c("sample_date", "sample_time"), sep = " ") %>% 
  mutate(sample_date = lubridate::mdy(sample_date)) %>% 
  mutate(year = year(sample_date)) %>% 
  mutate(month = month(sample_date))

#plot no3 from qb2
#unit is micrograms per liter. (value ranges from 0 to 1500)

qb2_no3 <- ggplot(data = qb2, aes(x = sample_date, y = no3)) +
  geom_line()

qb2_no3

#plot k from qb2
#unit it mg/l. (value ranges from 0 to 4) 

qb2_k <- ggplot(data = qb2, aes(x = sample_date, y = k)) +
  geom_line()

qb2_k
```


Marie code chunk
```{r}
# cleaning data for BQ3
BQ3 <- `QuebradaCuenca3-Bisley` %>% 
  clean_names() %>% 
  mutate(sample_date = lubridate::mdy(sample_date)) %>% 
  mutate(year = year(sample_date)) %>% 
  mutate(month = month(sample_date))

BQ3_no3_plot <- ggplot(data = BQ3, aes(x = sample_date, y = no3)) +
  geom_line(linetype = "dashed") +
  labs(x = "year", y = "Nitrate (ug/L)")
  
BQ3_k_plot <- ggplot(data = BQ3, aes(x = sample_date, y = k)) +
  geom_line(linetype = "dashed") +
  geom_vline(xintercept = as.numeric(as.Date("1990-01-01")), color = "blue") +
  labs(x = "year", y = "Potassium (mg/L)")
BQ3_k_plot

(BQ3_k_plot / BQ3_no3_plot) & theme_classic()

# note, note
```

Steven code chunk PRM
```{r}
prm <- RioMameyesPuenteRoto %>% 
  
  # clean name headings
  clean_names() %>% 
  
  # changed date "character" to "datetime"
  mutate(sample_date = lubridate::mdy(sample_date)) %>% 
  
  # separate out month and year
  mutate(year = year(sample_date)) %>% 
  mutate(month = month(sample_date)) %>% 
  
  # group by
  group_by(sample_date, year, month) %>% 
  summarize(k, no3)
  
  # select columns three columns
  # no3 in ug N/L
  # K in ug N/L
  
  # select("sample_date", "date", "year, "no3", "k")
  




prm



prm_no3 <- ggplot(data = prm, aes(x = sample_date, y = no3)) +
  geom_line()

prm_no3

prm_k<- ggplot(data = prm, aes(x = sample_date, y = k)) +
  geom_line()

prm_k


```

